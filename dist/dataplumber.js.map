{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 0314a5694b85bdad50a4","webpack:///./src/utils/index.js","webpack:///./src/classes/Method.class.js","webpack:///./src/classes/Hooks.class.js","webpack:///./src/classes/Contact.class.js","webpack:///./src/classes/Remote.class.js","webpack:///./src/index.js","webpack:///./src/DataPlumber.js","webpack:///./src/classes/Model.class.js","webpack:///./src/classes/Schema.class.js"],"names":["isNew","isDef","data","id","getURL","url","emulateIdKey","val","isArray","constructor","Array","isNumber","Number","defaults","obj","merge","concat","Object","assign","compose","list","reduce","acc","fn","then","Promise","resolve","convert","format","options","fields","keys","result","forEach","fieldSet","fieldName","formatField","type","default","to","defaultVal","NaN","mapReceiveHook","methods","Hooks","ReceiveBehaviour","mapHooks","mapSendHook","SendBehaviour","Error","hooks","map","hookName","Method","queues","queue","args","ctx","reject","catch","arg","x","y","_map","Map","key","operations","set","get","size","method","hook","isReceiveBehaviour","isSendBehaviour","TypeError","indexOf","Contact","_remotes","_default_remote","name","remote","opts","length","has","RangeError","Remote","_origin","origin","params","sync","ModelFactory","schema","Model","prototype","fetch","find","save","delete","RichModel","utils","initHooks","_hooks","HooksFactory","methodName","before","after","getHooks","apply","scope","generate","ContactFactory","remotes","contact","remoteName","index","addHooks","aboutName","DataPlumber","Schema","_name","_url","_contact","_emulateIdKey","filter","_fieldSet"],"mappings":"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","file":"dataplumber.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dataplumber\"] = factory();\n\telse\n\t\troot[\"dataplumber\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0314a5694b85bdad50a4","import Method from '../classes/Method.class';\r\nimport Hooks from '../classes/Hooks.class';\r\n\r\nexport const isNew = data => !isDef(data.id);\r\nexport const getURL = (url, id, emulateIdKey) => emulateIdKey ? url : (url + (isDef(id) ? `/${id}` : ''));\r\nexport const isDef = val => typeof val !== 'undefined';\r\nexport const isArray = val => val.constructor === Array;\r\nexport const isNumber = val => val.constructor === Number;\r\nexport const defaults = (obj, defaults = {}) =>{\r\n    const merge = (defaults, obj) => defaults.constructor === Array ? defaults.concat(obj) : Object.assign(defaults, obj);\r\n    return isDef(obj) ? merge(defaults, obj) : defaults;\r\n};\r\n\r\nexport const compose = (...list) => acc => list.reduce((acc, fn) => acc.then(fn), Promise.resolve(acc));\r\n\r\n/**\r\n * format code like that:\r\n * ```\r\n * {\r\n *   \"id\": { type: Number, default: null },\r\n *   \"nickname\": { type: String, default: \"\" },\r\n *   \"emial\": { type: String, default:\"\" },\r\n *   \"password\": { type: String, default:\"\" }\r\n * }\r\n * ```\r\n */\r\nexport function convert(format = {}, options){\r\n    options = defaults(options, { format: false });\r\n    return (data = {}, fields = [].concat(Object.keys(data), Object.keys(format)))=>{\r\n        const result = {};\r\n        fields.forEach(fieldName => {\r\n            const fieldSet = format[fieldName];\r\n            if (isDef(data[fieldName])) result[fieldName] = data[fieldName];\r\n            if (options.format && isDef(fieldSet)) result[fieldName] = formatField(fieldSet.type, fieldSet.default)(data[fieldName]);\r\n        });\r\n        return result;\r\n    }\r\n}\r\n\r\nexport function formatField(to, defaultVal){\r\n    return val=>{\r\n        let result;\r\n        if(!isDef(val)) result = defaultVal;\r\n        else result = to(val);\r\n        if (defaultVal === result) return result;\r\n        if (isNumber(result) && result === NaN) result = defaultVal;\r\n        if (result === null) result = defaultVal;\r\n        return result;\r\n    }\r\n}\r\n\r\nexport function mapReceiveHook(methods, options){\r\n    options = defaults(options, Hooks.ReceiveBehaviour);\r\n    return mapHooks(methods, options)\r\n}\r\nexport function mapSendHook(methods, options) {\r\n    options = defaults(options, Hooks.SendBehaviour);\r\n    return mapHooks(methods, options)\r\n}\r\nexport function mapHooks(methods, options={}){\r\n    if (!isDef(options.methods)) throw new Error('The options must have methods parameter in mapHooks');\r\n    if (!isArray(options.methods)) throw new Error('The options.methods must be Array in mapHooks');\r\n    if (!isDef(options.hooks)) throw new Error('The options must have hooks parameter in mapHooks');\r\n    if (!isArray(options.hooks)) throw new Error('The options.hooks must be Array in mapHooks');\r\n    const result = options.methods.map(hookName => { return { [hookName]: {} } }).reduce(Object.assign);\r\n    Object.keys(result).forEach(hookName=>{\r\n        result[hookName] = options.hooks.map(hookName => { return { [hookName]: methods } }).reduce(Object.assign);\r\n    })\r\n    return result;\r\n}\r\n\r\nexport default {\r\n    isNew,\r\n    getURL,\r\n    isDef,\r\n    defaults,\r\n    convert,\r\n    compose,\r\n    mapSendHook,\r\n    mapReceiveHook\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/utils/index.js","// import compose from 'koa-compose';\r\nimport { defaults, compose } from '../utils/';\r\n\r\n/**\r\n * queue call function like that:\r\n * ```\r\n * (ctx, next) => {\r\n *   // ctx is content in all queue functions, like koa.\r\n *   // ctx have $model, arge, result fields\r\n *   // ======================================================\r\n *   // ctx.$model is function scope\r\n *   // ctx.arge is function arguments\r\n *   // ctx.result is this function result\r\n *   next();\r\n * }\r\n * ```\r\n * \r\n * run function return Promise data pattern like that:\r\n * ```\r\n * let err, result;\r\n * [err, result] = Queue.run($model, args, queues);\r\n * if(err) throw err;\r\n * console.log(result);\r\n * ```\r\n * more detail look test file.\r\n */\r\n\r\nclass Method {\r\n    static generate(queues) {\r\n        const queue = compose(...queues);\r\n        return (args, ctx={}) => {\r\n            ctx = Object.assign(ctx, {args});\r\n            return new Promise((resolve, reject) => {\r\n                queue(ctx)\r\n                    .then(ctx=>resolve(ctx.result))\r\n                    .catch(reject);\r\n            });\r\n        }\r\n    }\r\n    static concat(...args){\r\n        return args.map(arg => defaults(arg, [])).reduce((x,y)=>x.concat(y));\r\n    }\r\n}\r\n\r\nexport default Method;\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Method.class.js","class Hooks {\r\n    constructor() {\r\n        this._map = new Map();\r\n    }\r\n    addHooks(key, operations) {\r\n        return this._map.set(key, operations);\r\n    }\r\n    getHooks(key) {\r\n        return this._map.get(key);\r\n    }\r\n    each(fn) {\r\n        return this._map.forEach(fn);\r\n    }\r\n    get length() {\r\n        return this._map.size;\r\n    }\r\n\r\n    static parse({ method, hook }, type = 'method'){\r\n        let result = `${method}:${hook}`;\r\n        if (type === 'behaviour') {\r\n            if (Hooks.isReceiveBehaviour(method, hook)) result = 'receive';\r\n            if (Hooks.isSendBehaviour(method, hook)) result = 'send';\r\n        }\r\n        return result;\r\n    }\r\n\r\n    static get ReceiveBehaviour(){\r\n        return {\r\n            methods: ['fetch','find'],\r\n            hooks: ['after']\r\n        }\r\n    }\r\n    static get SendBehaviour() {\r\n        return {\r\n            methods: ['save'],\r\n            hooks: ['before']\r\n        }\r\n    }\r\n\r\n    static isReceiveBehaviour(method, hook){\r\n        if (typeof method !== 'string') throw new TypeError('The method must be string in isReceiveBehaviour()');\r\n        if (typeof hook !== 'string') throw new TypeError('The hook must be string in isReceiveBehaviour()');\r\n        return Hooks.ReceiveBehaviour.methods.indexOf(method) > -1 && Hooks.ReceiveBehaviour.hooks.indexOf(hook) > -1;\r\n    }\r\n\r\n    static isSendBehaviour(method, hook) {\r\n        if (typeof method !== 'string') throw new TypeError('The method must be string in isSendBehaviour()');\r\n        if (typeof hook !== 'string') throw new TypeError('The hook must be string in isSendBehaviour()');\r\n        return Hooks.SendBehaviour.methods.indexOf(method) > -1 && Hooks.SendBehaviour.hooks.indexOf(hook) > -1;\r\n    }\r\n}\r\n\r\nexport default Hooks;\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Hooks.class.js","import Remote from './Remote.class';\r\nimport { defaults } from '../utils/';\r\n\r\nexport default class Contact {\r\n    constructor() {\r\n        this._remotes = {};\r\n        this._default_remote = \"\";\r\n    }\r\n    remote(...args) {\r\n        let name = args[0],\r\n            remote = args[1],\r\n            opts = defaults(args[2], { default: false });\r\n        if (args.length >= 2) {\r\n            // set remote\r\n            if (typeof name !== 'string') throw new TypeError('The first arguments must be String');\r\n            if (remote.constructor !== Remote) throw new TypeError('The second arguments must be Remote');\r\n            this._remotes[name] = remote;\r\n            if (opts.default || this.length == 1) this.default(name);\r\n        } else {\r\n            name = name ? name : this._default_remote;\r\n            if (!this.has(name)) throw new RangeError(`Remote does not exist ${name} in remote()`);\r\n            // get remote\r\n            remote = this._remotes[name];\r\n            return remote;\r\n        }\r\n    }\r\n    default(name) {\r\n        if(typeof name !== 'string') throw new TypeError('The name must be string in default()');\r\n        if (!this.has(name)) throw new RangeError(`Remote does not exist ${name} in default()`);\r\n        this._default_remote = name;\r\n    }\r\n    has(name) {\r\n        return Object.keys(this._remotes).indexOf(name) !== -1;\r\n    }\r\n    get length() {\r\n        return Object.keys(this._remotes).length;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Contact.class.js","export default class Remote {\r\n    constructor(options) {\r\n        this._origin = options.origin;\r\n    }\r\n    get(url, params) {\r\n        return this.sync({\r\n            url,\r\n            method: 'GET',\r\n            params\r\n        });\r\n    }\r\n    post(url, data) {\r\n        return this.sync({\r\n            method: 'POST',\r\n            url,\r\n            data\r\n        });\r\n    }\r\n    put(url, data) {\r\n        return this.sync({\r\n            method: 'PUT',\r\n            url,\r\n            data\r\n        });\r\n    }\r\n    patch(url, data) {\r\n        return this.sync({\r\n            method: 'PATCH',\r\n            url,\r\n            data\r\n        });\r\n    }\r\n    delete(url, data) {\r\n        return this.sync({\r\n            method: 'DELETE',\r\n            url,\r\n            data\r\n        });\r\n    }\r\n    sync(options){\r\n        return this._origin(options);\r\n    }\r\n    get origin() {\r\n        return this._origin;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Remote.class.js","import DataPlumber from './DataPlumber';\r\nexport default DataPlumber;\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import utils from './utils/';\r\nimport operations from './utils/';\r\nimport Model from './classes/Model.class';\r\nimport Hooks from './classes/Hooks.class';\r\nimport Contact from './classes/Contact.class';\r\nimport Remote from './classes/Remote.class';\r\nimport Schema from './classes/Schema.class';\r\nimport Method from './classes/Method.class';\r\n\r\nexport function ModelFactory(options) {\r\n    const schema = new Schema(options.fields);\r\n    const methods = {\r\n        'fetch': Model.prototype.fetch,\r\n        'find': Model.prototype.find,\r\n        'save': Model.prototype.save,\r\n        'delete': Model.prototype.delete,\r\n        ...options.methods\r\n    }\r\n    //RichModel\r\n    class RichModel extends Model{\r\n        constructor(opts){\r\n            opts = utils.defaults(opts);\r\n            opts.name = options.name;\r\n            super(opts);\r\n            this.initHooks(options.hooks);\r\n        }\r\n        initHooks(options){\r\n            this._hooks = HooksFactory(options);\r\n        }\r\n        get schema(){\r\n            return schema;\r\n        }\r\n        static get schema(){\r\n            return schema;\r\n        }\r\n    }\r\n    Object\r\n        .keys(methods)\r\n        .forEach(methodName => {\r\n            // all hook action magic in here.\r\n            RichModel.prototype[methodName] = function (...args){\r\n                const opts = utils.defaults(args[args.length-1]);\r\n                const hooks = utils.defaults(opts.hooks, { before: [], after: [] });\r\n\r\n                const before = Method.concat(hooks.before, this._hooks.getHooks(`${methodName}::before`));\r\n                const after = Method.concat(hooks.after, this._hooks.getHooks(`${methodName}::after`));\r\n\r\n                const method = (ctx) => methods[methodName].apply(ctx.scope, ctx.args).then(data => {\r\n                    ctx.hook = 'after';\r\n                    ctx.result = data;\r\n                    return Promise.resolve(ctx);\r\n                });\r\n                const ctx = { scope: this, method: methodName, hook: 'before' };\r\n\r\n                return Method.generate([...before, method, ...after])(args, ctx);\r\n            }\r\n        });\r\n\r\n    return RichModel;\r\n}\r\n\r\nexport function ContactFactory(remotes = {}, defaults = 'base') {\r\n    const contact = new Contact();\r\n    Object.keys(remotes).forEach((remoteName, index) => {\r\n        contact.remote(remoteName, new Remote({ origin: remotes[remoteName] }), { default: index == 0 });\r\n    })\r\n    return contact;\r\n}\r\n\r\nexport function HooksFactory(options){\r\n    const hooks = new Hooks();\r\n    //解析hooks的逻辑，并添加hook记录\r\n    \r\n    Object\r\n        .keys(utils.defaults(options))\r\n        .forEach(hookName=>{\r\n            const hook = options[hookName];\r\n            Object.keys(hook).forEach(aboutName=>{\r\n                hooks.addHooks(`${hookName}::${aboutName}`, hook[aboutName]);\r\n            })\r\n        });\r\n\r\n    return hooks;\r\n}\r\n\r\nconst DataPlumber = {\r\n    Contact: ContactFactory,\r\n    Model: ModelFactory,\r\n    Hooks: HooksFactory,\r\n    Schema,\r\n    mapReceiveHook: utils.mapReceiveHook,\r\n    mapSendHook: utils.mapSendHook,\r\n    operations\r\n};\r\n\r\nexport default DataPlumber;\n\n\n// WEBPACK FOOTER //\n// ./src/DataPlumber.js","import { isNew, getURL, defaults, isDef } from \"../utils/\";\r\nimport Contact from './Contact.class';\r\n\r\nexport default class Model {\r\n    constructor(options) {\r\n        const name = this._name = options.name;\r\n        if(!isDef(name) || typeof name != 'string'){\r\n            throw new Error('options.name must be string in Model');\r\n        }\r\n        this._url = isDef(options.url) ? options.url : `/${name}`;\r\n        if (!isDef(options.contact) || options.contact.constructor != Contact){\r\n            throw new Error('options.contact must be Contact class in Model');\r\n        }\r\n        this._contact = options.contact;\r\n        this._emulateIdKey = typeof options.emulateIdKey === 'undefined' ? false : options.emulateIdKey;\r\n    }\r\n    fetch(params, opts) {\r\n        const { origin } = defaults(opts);\r\n        return this.remote(origin).get(this._url, params);\r\n    }\r\n    find(id, opts) {\r\n        const { origin } = defaults(opts);\r\n        const params = this._emulateIdKey ? { [this._emulateIdKey]: id } : {};\r\n        return this.remote(origin).get(getURL(this._url, id, this._emulateIdKey), params );\r\n    }\r\n    save(data, opts) {\r\n        const { origin } = defaults(opts);\r\n        const { id } = data;\r\n        const url = getURL(this._url, id, this._emulateIdKey);\r\n        return this.remote(origin)[isNew(data) ? 'post' : 'put'](url, data);\r\n    }\r\n    delete(id, opts) {\r\n        const { origin } = defaults(opts);\r\n        const params = this._emulateIdKey ? { [this._emulateIdKey]: id } : {};\r\n        return this.remote(origin).delete(getURL(this._url, id, this._emulateIdKey), params);\r\n    }\r\n    remote(name) {\r\n        return this._contact.remote(name);\r\n    }\r\n    get contact(){\r\n        return this._contact;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Model.class.js","import { convert } from \"../utils/\";\r\n\r\nexport const format = (data, fieldSet) => convert(fieldSet, { format:true })(data);\r\nexport const filter = (data, fields) => convert()(data, fields);\r\nexport const schema = fieldSet => convert(fieldSet, { format: true })({}, Object.keys(fieldSet));\r\n\r\nexport default class Schema {\r\n    constructor(fieldSet) {\r\n        this._fieldSet = fieldSet;\r\n    }\r\n    format(data) {\r\n        return format(data, this._fieldSet);\r\n    }\r\n    filter(data, fields = Object.keys(this._fieldSet)){\r\n        return filter(data, fields);\r\n    }\r\n    default(){\r\n        return schema(this._fieldSet);\r\n    }\r\n    get fieldSet() {\r\n        return this._fieldSet;\r\n    }\r\n\r\n    // static\r\n    static format(data, fieldSet){\r\n        return format(data, fieldSet);\r\n    }\r\n    static filter(data, fields) {\r\n        return filter(data, fields);\r\n    }\r\n    static default(fieldSet) {\r\n        return schema(fieldSet);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Schema.class.js"],"sourceRoot":""}